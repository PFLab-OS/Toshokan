paging/011: 物理メモリの設定
==========================

今回使用するディレクトリ：[sample/paging/011](https://github.com/PFLab-OS/Toshokan/tree/master/sample/paging/011)

今回は[この行](https://github.com/PFLab-OS/Toshokan/blob/master/sample/paging/011/friend.cc#L56)を少し書き換えてみました。
この行の中の`0x80001000UL`という値が今回のキーワードです。

プログラムをmakeして、QEMUコンソールを開いてください。（開き方は[paging/003](003.md)と一緒です。）

さて、何時も通り0xC0000000からの仮想メモリを見てみましょう。

```
(qemu) cpu 1
(qemu) x /10x 0xC0000000
00000000c0000000: 0x80002027 0x00000000 0x00000000 0x00000000
00000000c0000010: 0x00000000 0x00000000 0x00000000 0x00000000
00000000c0000020: 0x00000000 0x00000000
```

[paging/003](003.md)の時と違い、今回はきちんとメモリにアクセスできました。・・・でも[paging/002](002.md)の内容とは違いますね・・・。何ででしょう？

```
(qemu) xp /10x 0x80000000
0000000080000000: 0x90661eeb 0x4a70726b 0x00097000 0x00000000
0000000080000010: 0x80000000 0x00000000 0x00000000 0x00000000
0000000080000020: 0x8ec88cfa 0x168b66d8
```

この通り、0x80000000からの物理メモリは変化していません。

次に、キーワードである`0x80001000UL`の物理メモリを見てみましょう。（ULは整数値をunsigned longとして扱いたいという言語の記法なので、QEMUコンソールでアドレスを参照する時はULをつけないでください）

```
(qemu) xp /10x 0x80001000
0000000080001000: 0x80002027 0x00000000 0x00000000 0x00000000
0000000080001010: 0x00000000 0x00000000 0x00000000 0x00000000
0000000080001020: 0x00000000 0x00000000
```

どうやら0xC0000000からの仮想メモリと、0x80001000からの物理メモリは同一のようです。では[先程の行](https://github.com/PFLab-OS/Toshokan/blob/master/sample/paging/011/friend.cc#L56)の`0x80001000UL`を`0x80002000UL`に書き換えてみたらどうなるでしょうか？試してみてください。

[このセクションの目次に戻る](index.md)
